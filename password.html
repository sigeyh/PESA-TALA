<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pesa Tala Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-800 to-gray-900 min-h-screen text-white px-4 py-6">

  <div class="max-w-sm mx-auto bg-white/10 rounded-2xl shadow-xl p-5 backdrop-blur-lg">
    <!-- Logo -->
    <div class="text-center mb-4">
      <img src="zash logo.jpeg" alt="Pesa Tala Logo" class="w-20 h-20 mx-auto rounded-full shadow-md" />
      <h1 class="text-2xl font-bold mt-2 text-yellow-400">PESA TALA</h1>
      <p class="text-sm text-gray-300">Your personal loan dashboard</p>
    </div>

    <!-- Account Status -->
    <div class="mb-4">
      <h2 class="text-sm font-semibold text-gray-300 mb-1">Account Status</h2>
      <div id="accountStatus" class="bg-yellow-500 text-black font-bold py-2 px-3 rounded-xl text-center">
        Active
      </div>
    </div>

    <!-- Balance -->
    <div class="mb-4">
      <h2 class="text-sm font-semibold text-gray-300 mb-1">Current Balance</h2>
      <div id="balance" class="bg-purple-700 py-2 px-3 rounded-xl text-center font-bold text-white text-xl">
        Ksh ...
      </div>
    </div>

    <!-- Loan Details -->
    <div class="mb-4">
      <h2 class="text-sm font-semibold text-gray-300 mb-2">Loan Details</h2>
      <div class="bg-white/10 p-3 rounded-xl text-sm">
        <p><strong>Amount:</strong> <span id="loanAmount" class="text-yellow-300">Ksh ...</span></p>
        <p><strong>Date Issued:</strong> <span id="loanDate" class="text-yellow-300">...</span></p>
        <p><strong>Next Repayment Date:</strong> <span id="repaymentDate" class="text-yellow-300">...</span></p>
      </div>
    </div>

    <!-- Buttons -->
    <div class="flex flex-col gap-3 mt-6">
      <button class="bg-yellow-400 hover:bg-yellow-300 text-purple-900 font-bold py-2 rounded-xl shadow" onclick="alert('Payment portal coming soon')">
        üí∞ Repay Now
      </button>
      <button onclick="window.location.href='checklimit.html'" class="bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 rounded-xl shadow">
        üìù Apply New Loan
      </button>
    </div>
  </div>

  <script>
    // Fetch stored values or defaults
    const loanAmount = parseInt(localStorage.getItem("pickedLoanAmount")) || 3000;
    const balance = localStorage.getItem("accountBalance") || (loanAmount - (loanAmount * 0.055)).toFixed(0);
    
    // Set today's date and +14 days for repayment
    const today = new Date();
    const dateIssued = today.toLocaleDateString();
    const repaymentDate = new Date(today.setDate(today.getDate() + 14)).toLocaleDateString();

    // Populate page
    document.getElementById("loanAmount").textContent = "Ksh " + loanAmount.toLocaleString();
    document.getElementById("loanDate").textContent = dateIssued;
    document.getElementById("repaymentDate").textContent = repaymentDate;
    document.getElementById("balance").textContent = "Ksh " + balance.toLocaleString();
  </script>
</body>
</html>
